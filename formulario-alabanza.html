<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Formulario Alabanza Templo Mayor</title>
<style>
:root {
  --bg:#f7f7f7;--text:#222;--card:#fff;--accent:#3b6ea5;--muted:#777;
}
[data-theme="dark"]{
  --bg:#121212;--text:#eee;--card:#252525;--accent:#4fa3ff;--muted:#aaa;
}
body{margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:var(--text);transition:.3s;}
header{display:flex;align-items:center;justify-content:space-between;background:var(--card);
box-shadow:0 2px 6px rgba(0,0,0,.2);padding:10px 20px;}
header img{height:60px;transition:opacity .3s ease;}
.theme-btn{background:var(--accent);border:none;color:#fff;padding:8px 14px;
border-radius:6px;cursor:pointer;}
.container{max-width:900px;margin:30px auto;padding:20px;}
.card{background:var(--card);padding:30px 40px;border-radius:10px;
box-shadow:0 3px 10px rgba(0,0,0,.1);margin-bottom:25px;text-align:center;}
.card h2{margin-top:0;color:var(--accent);text-align:center;}
label{font-weight:bold;display:block;margin-top:12px;text-align:left;width:60%;margin-left:auto;margin-right:auto;}
small{color:var(--muted);margin-left:5px;font-weight:normal;}
input,textarea{width:60%;padding:10px;margin-top:4px;border-radius:5px;
border:1px solid #ccc;background:var(--bg);color:var(--text);display:block;
margin-left:auto;margin-right:auto;}
button.submit{margin-top:20px;background:var(--accent);color:#fff;
border:none;padding:12px 20px;border-radius:6px;font-size:16px;cursor:pointer;}
button.submit:hover{opacity:0.9;}
/* MODAL */
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;
background-color:rgba(0,0,0,0.6);}
.modal-content{background:var(--card);color:var(--text);margin:15% auto;padding:30px;
border-radius:10px;width:300px;text-align:center;box-shadow:0 3px 10px rgba(0,0,0,0.3);}
.modal-content h3{margin:0 0 10px;color:var(--accent);}
</style>
</head>
<body>
<header>
  <img id="logo" src="Loco%20Casa%20+%20deep%201600x400.png" alt="Deepartment Logo">
  <button class="theme-btn" id="themeToggle">üåô / ‚òÄÔ∏è</button>
</header>

<div class="container">
  <form id="alabanzaForm">
    
    <div class="card">
      <h2>üìç Lugar / Log√≠stica</h2>
      <label>Ministerio / Equipo <small>(Ej. ALABANZA TEMPLO MAYOR)</small></label>
      <input name="ministerio" required>
      <label>Fecha y hora ‚Äì Prueba de sonido + Ensayo 
        <small>(Selecciona fecha y hora exactas)</small></label>
      <input name="fechaEnsayo" type="datetime-local" required>
      <label>Encargado general <small>(Nombre completo)</small></label>
      <input name="encargado" required>
      <label>Talkback <small>(Persona responsable del talkback)</small></label>
      <input name="talkback" required>
      <label>Correo destino principal <small>(Quien recibir√° el resumen)</small></label>
      <input name="correoDestino" type="email" value="dcalvinisti@gmail.com" required>
    </div>

    <div class="card">
      <h2>üé§ Voces e Instrumentos</h2>
      <label>Voces <small>(Separadas por + o coma)</small></label>
      <textarea name="voces" rows="3" required></textarea>
      <label>Instrumentos <small>(Una l√≠nea por rol: ‚ÄúPiano 1: Nombre‚Äù)</small></label>
      <textarea name="instrumentos" rows="4" required></textarea>
    </div>

    <div class="card">
      <h2>üé∂ Setlist</h2>
      <label>Bloque ‚Äì Alabanza <small>(Una canci√≥n por l√≠nea, indica tono y fuente)</small></label>
      <textarea name="alabanza" rows="4" required></textarea>
      <label>Bloque ‚Äì Adoraci√≥n <small>(Una canci√≥n por l√≠nea)</small></label>
      <textarea name="adoracion" rows="4" required></textarea>
    </div>

    <div class="card">
      <h2>üéöÔ∏è Rider T√©cnico</h2>
      <label>Rider ‚Äì Elementos requeridos 
        <small>(Separa con comas)</small></label>
      <textarea name="rider" rows="3"
        placeholder="7 Micr√≥fonos | Voces, Sistema de Monitoreo, 8 Canales Secuencia..." required></textarea>
      <label>N√∫mero de personas para desayuno <small>(Ej. 17)</small></label>
      <input name="desayuno" type="number" required>
      <label>Nota adicional <small>(Comentarios u observaciones extra)</small></label>
      <textarea name="nota"></textarea>
    </div>

    <div style="text-align:center;">
      <button class="submit" type="submit">Enviar</button>
    </div>
  </form>
</div>

<!-- MODAL -->
<div id="statusModal" class="modal">
  <div class="modal-content">
    <h3 id="modalTitle">Enviando...</h3>
    <p id="modalMessage">Por favor espera mientras procesamos tu informaci√≥n.</p>
  </div>
</div>

<script>
const webhookURL = "https://corsproxy.io/?https://hook.us2.make.com/z27hpu4bwq9q0p5bi59sojr2dw4"; // tu webhook real

// Tema oscuro / claro con logos diferentes
const toggle = document.getElementById("themeToggle");
const logo = document.getElementById("logo");
const lightLogo = "Loco%20Casa%20+%20deep%201600x400.png";
const darkLogo = "Loco%20Casa%20+%20deep%201600x400%20white.png";

function setTheme(theme) {
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem("theme", theme);
  logo.src = theme === "dark" ? darkLogo : lightLogo;
}
setTheme(localStorage.getItem("theme") || "light");
toggle.addEventListener("click", () => {
  const newTheme = document.documentElement.getAttribute("data-theme") === "dark" ? "light" : "dark";
  setTheme(newTheme);
});

// Modal helpers
const modal=document.getElementById("statusModal");
const modalTitle=document.getElementById("modalTitle");
const modalMessage=document.getElementById("modalMessage");
function showModal(title,msg,color){
  modalTitle.textContent=title;
  modalMessage.textContent=msg;
  modalTitle.style.color=color;
  modal.style.display="block";
}
function closeModalAfter(ms){setTimeout(()=>{modal.style.display="none";},ms);}

// Env√≠o del formulario
document.getElementById("alabanzaForm").addEventListener("submit",async e=>{
  e.preventDefault();
  const form=e.target;
  const data=Object.fromEntries(new FormData(form).entries());
  showModal("Enviando...","Por favor espera mientras procesamos tu informaci√≥n.","var(--accent)");
  try{
    const res=await fetch(webhookURL,{
      method:"POST",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify(data)
    });
    if(res.ok){
      showModal("‚úÖ Enviado","Tu formulario fue enviado correctamente.","green");
      form.reset();
      closeModalAfter(2500);
    }else throw new Error();
  }catch{
    showModal("‚ùå Error","Ocurri√≥ un error al enviar la informaci√≥n.","red");
    closeModalAfter(3000);
  }
});
</script>
</body>
</html>
